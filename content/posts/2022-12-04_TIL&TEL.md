---
title: " TIL&TEL 22.11.28~22.12.04  "
date: "2022-12-04T01:23:45.678Z"
template: "post"
draft: false
slug: "/posts/TIL&TEL_22-12-04/"
category: "TIL&TEL"
tags:
- "TIL"
- "TEL"


description: " 22.11.28~22.12.04 배운것, 씨름한것들 "
---

## TIL( Today I Learned)

### 22-11-28 월

- WORKPLACE
    - PHASE 1 9-12 / 6
        - ISMS 찾아봄
    - PHASE 2 13-16 / 6
        - 
    - PHASE 3 16-18 / 4
        - 

### 22-11-29 화

- WORKPLACE
    - PHASE 1 9-12 / 6
        - guard duty 소싱
        - ~~VPC 플로우 로그 만들기~~
        - ~~DNS 쿼리로그 만들기~~
        - 들어오는 데이터 설명 작성 필요
            - VPC Flowlog 기본
                - ${version} ${account-id} ${interface-id} ${srcaddr} ${dstaddr} ${srcport} ${dstport} ${protocol} ${packets} ${bytes} ${start} ${end} ${action} ${log-status}
                - [설명](https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/flow-logs.html#flow-log-records)
            - 쿼리로깅
    - PHASE 2 13-16 / 6
        - VPC,  DNS => lambda
            - dns 에서 ip 문의하고
            - 실제 ip로 연결되면 -> vpc flow logs
        - 하위계정 이벤트 발생기 만들기
            - random, 1분에 한번씩
            - 이벤트 발생 시키기 
                - 이벤트, 파람 매핑 딕셔너리 사용
            - route53 접속도 만들어줘야 함
                - 
    - PHASE 3 16-18 / 4
        - 파일로 Cloudformation 세팅
            - `create-stack` CLI 실행시 리턴 값 어떻게?
                - {
                    - "StackId": "---"
                - }
            - 결과 진행 확인 어떻게 하는가?
                - `describe-stacks`
                - 스택 결과물을 확인한다.
        - formation 
            - 트레일 기록
                - 남김
        - AWS 는 Cloudforamtion 으로 처리
            - GCP, Azure 는 어떻게 처리할 것인가?
        - IaaC
            - CloudFormation
            - Ansible
            - Terraform (HCL 랭귀지 사용)

### 22-11-30 수

- WORKPLACE
    - PHASE 1 9-12 / 6
        - guard duty 소싱
            -  Amazon S3 로그, 
            - CloudTrail 관리 이벤트 로그
            - DNS 로그
            - Amazon EBS 볼륨AWS CloudTrail 데이터
            - 쿠버네티스 감사 로그 
            - Amazon VPC 흐름 로그
        - 깃 마인드 정리하기
    - PHASE 2 13-16 / 6
        - AWS CONFIG 문서 읽기 4 | 
            - config
                - 리소스 관리
                    - 리소스에 대한 호출을 폴링함으로써 리소스가 생성, 수정 또는 삭제될 때마다 모니터링할 필요 없이 이러한 변경 사항에 대한 알림을 받을 수 있습니다.
                    - AWS Config에서 리소스가 규칙 중 하나의 조건을 위반했음을 감지하면, AWS Config는 해당 리소스를 규칙 미준수로 표시하고 알림을 보냅니다. AWS Config는 생성, 변경 또는 삭제되는 리소스를 계속해서 평가합니다.
                - 규칙 및 적합성 팩
                    - 보안 및 규정 준수를 입증하려면 리소스의 기록 구성에 액세스해야 합니다. 이 정보는 AWS Config에서 제공합니다.
                    - AWS Config를 통해 수정하고자 하는 리소스가 다른 리소스와 어떤 관계에 있는지 보고, 변경 영향을 평가할 수 있습니다.
                    - AWS Config를 사용하여 특정 시간에 열린 포트 규칙을 포함하여 EC2 보안 그룹의 구성을 볼 수 있습니다. 이 정보를 통해 보안 그룹이 특정 포트로 들어오는 TCP 트래픽을 차단했는지 여부를 확인할 수 있습니다.
                - Aggreggre
                    - 애그리게이터를 사용하여 리소스 인벤토리 및 규정 준수를 중앙에서 확인할 수 있습니다. 
        - k-isms cloudformation.yaml 문서 읽기 4 | 
            - K-ISMS 운영 모범 사례 by SK Sheildus
                - resource 구성
                - VPC 구성
                - Config 검증 규칙들
                - Provides the base security, IAM, and access configuration for the AWS account (
    - PHASE 3 16-18 / 4
        - AWS CONFIG API 조사
            - 리소스 추적
                - 
            - 규칙 적용점 검사
                - 규칙 주입
                    - [PutConfigRule](https://docs.aws.amazon.com/config/latest/APIReference/API_PutConfigRule.html)
                    - 
                    - [PutConformancePack](https://docs.aws.amazon.com/config/latest/APIReference/API_PutConformancePack.html)
                    - 
                    - [PutConfigurationAggregator](https://docs.aws.amazon.com/config/latest/APIReference/API_PutConfigurationAggregator.html)
                - [StartResourceEvaluation](https://docs.aws.amazon.com/config/latest/APIReference/API_StartResourceEvaluation.html), runs an on-demand evaluation for the specified resource to determine whether the resource details will comply with configured AWS Config rules.
                - [StartConfigRulesEvaluation](https://docs.aws.amazon.com/config/latest/APIReference/API_StartConfigRulesEvaluation.html), runs an on-demand evaluation for the specified AWS Config rules against the last known configuration state of the resources.
                - [DescribeConfigRuleEvaluationStatus](https://docs.aws.amazon.com/config/latest/APIReference/API_DescribeConfigRuleEvaluationStatus.html), returns status information for each of your AWS Config managed rules.
                - [DescribeComplianceByResource](https://docs.aws.amazon.com/config/latest/APIReference/API_DescribeComplianceByResource.html), indicates whether the specified AWS resources are compliant.
                - [DescribeComplianceByConfigRule](https://docs.aws.amazon.com/config/latest/APIReference/API_DescribeComplianceByConfigRule.html), indicates whether the specified AWS Config rules are compliant.
                - 

### 22-12-01 목

- WORKPLACE

    - PHASE 1 9-12 / 6

        - schema 잡기
            - ${account-id} ${action} ${az-id} ${bytes} ${dstaddr} ${dstport} ${end} ${flow-direction} ${instance-id} ${interface-id} ${log-status} ${packets} ${pkt-dst-aws-service} ${pkt-dstaddr} ${pkt-src-aws-service} ${pkt-srcaddr} ${protocol} ${region} ${srcaddr} ${srcport} ${start} ${sublocation-id} ${sublocation-type} ${subnet-id} ${tcp-flags} ${traffic-path} ${type} ${version} ${vpc-id}
            - 
        - 람다 -> aurora
            - vpc-flowlog : all fields
            - dns query : all 
        - 레이어 포함 포메이션으로 람다 올리기??
            - s3 버킷에서 댕겨옴
                - \```    Content:
                          S3Bucket: my-bucket-us-west-2-123456789012
                          S3Key: layer.zip```
            - 

        - PHASE 2 13-16 / 6
            - AWS CONFIG 문서 읽기 4 | 
                - config
                    - 리소스 관리
                        - 리소스에 대한 호출을 폴링함으로써 리소스가 생성, 수정 또는 삭제될 때마다 모니터링할 필요 없이 이러한 변경 사항에 대한 알림을 받을 수 있습니다.
                        - AWS Config에서 리소스가 규칙 중 하나의 조건을 위반했음을 감지하면, AWS Config는 해당 리소스를 규칙 미준수로 표시하고 알림을 보냅니다. AWS Config는 생성, 변경 또는 삭제되는 리소스를 계속해서 평가합니다.
                    - 규칙 및 적합성 팩
                        - 보안 및 규정 준수를 입증하려면 리소스의 기록 구성에 액세스해야 합니다. 이 정보는 AWS Config에서 제공합니다.
                        - AWS Config를 통해 수정하고자 하는 리소스가 다른 리소스와 어떤 관계에 있는지 보고, 변경 영향을 평가할 수 있습니다.
                        - AWS Config를 사용하여 특정 시간에 열린 포트 규칙을 포함하여 EC2 보안 그룹의 구성을 볼 수 있습니다. 이 정보를 통해 보안 그룹이 특정 포트로 들어오는 TCP 트래픽을 차단했는지 여부를 확인할 수 있습니다.
                    - Aggreggre
                        - 애그리게이터를 사용하여 리소스 인벤토리 및 규정 준수를 중앙에서 확인할 수 있습니다. 
                    - 
            - k-isms cloudformation.yaml 문서 읽기 4 | 
                - K-ISMS 운영 모범 사례 by SK Sheildus
                    - resource 구성
                    - VPC 구성
                    - Config 검증 규칙들
                    - Provides the base security, IAM, and access configuration for the AWS account (

    - PHASE 3 16-18 / 4
        - Table migration

### 22-12-02 금

- PHASE 1 9-12 / 6
    - 레이어 포함 포메이션으로 람다 올리기 어떻게?
        - s3 버킷에서 댕겨옴
            - \```    Content:
                      S3Bucket: my-bucket-us-west-2-123456789012
                      S3Key: layer.zip```
    - 람다 -> aurora
        - ~~dns query : all ~~
        - vpc-flowlog : all fields
            - 왜 되지...???
    - 메트릭 스트림으로 받아보기
        - parsing
        - schema
        - cpu 관련 정보들
            - 
- PHASE 2 13-16 / 6
    - Severity 2탄  4 |  2
        - 
- PHASE 3 16-18 / 4
    - 수집 모듈 회의
        - 자빅스
            - 수집 방식

## TEL (Trial and Error Log)

### 22-12-01

- ERROR: [ERROR] ValueError: cannot concatenate unaligned mixed dimensional NDFrame objects
    - SITUATION:
        - concat dataframe
    - REASON:
        - But if you want to try to concatenate 1D and 3D **DataFrame**, that will cause an error.
    - SOLUTION:
        - uniform format