{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/TIL&TEL_22-12-25/","result":{"data":{"markdownRemark":{"id":"b890c9a4-22e8-566a-afc7-be8ba8ae400e","html":"<h2 id=\"til-today-i-learned\" style=\"position:relative;\"><a href=\"#til-today-i-learned\" aria-label=\"til today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TIL( Today I Learned)</h2>\n<h3 id=\"22-12-19-월\" style=\"position:relative;\"><a href=\"#22-12-19-%EC%9B%94\" aria-label=\"22 12 19 월 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-19 월</h3>\n<ul>\n<li>\n<p>WORKPLACE</p>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>\n<p>TimescaleDB</p>\n<ul>\n<li>pg Extension</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>미팅 정리</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<h3 id=\"22-12-20-화\" style=\"position:relative;\"><a href=\"#22-12-20-%ED%99%94\" aria-label=\"22 12 20 화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-20 화</h3>\n<ul>\n<li>\n<p>WORKPLACE</p>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>s3 비교 동작 4 | 4</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>\n<p>타계정간 vpc flow, dns query 수집 방법 정리하기 6 | </p>\n<ul>\n<li>조사</li>\n<li>정리 : 깃마인드</li>\n</ul>\n</li>\n<li>\n<p>VPC가 계정 귀속이면 별개, 계정 통합이면 통합</p>\n<ul>\n<li>dns query 도 VPC_id 기반으로  추적함</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"22-12-21-수\" style=\"position:relative;\"><a href=\"#22-12-21-%EC%88%98\" aria-label=\"22 12 21 수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-21 수</h3>\n<ul>\n<li>\n<p>WORKPLACE</p>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>\n<p>타계정간 vpc flow, dns query 수집 방법 정리하기 6 | </p>\n<ul>\n<li>\n<p>조사</p>\n<ul>\n<li>\n<p>VPC가 계정 귀속이면 별개, 계정 통합이면 통합</p>\n<ul>\n<li>dns query 도 VPC_id 기반으로  추적함</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>정리 : 깃마인드</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>미팅 2 | 2</li>\n<li>\n<p>다음 액션</p>\n<ul>\n<li>\n<p>SQL 개선</p>\n<ul>\n<li>\n<p>기본 통계</p>\n<ul>\n<li>avg, var, median, standard var</li>\n</ul>\n</li>\n<li>API event_id 같이 묶기</li>\n</ul>\n</li>\n<li>\n<p>S3</p>\n<ul>\n<li>\n<p>타계정 모으기  가능?</p>\n<ul>\n<li>\n<p>가능</p>\n<ul>\n<li>s3 policy에 Account-id 계속 추가해줘야함</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>등급</p>\n<ul>\n<li>\n<p>초기 등급 세팅 가능?</p>\n<ul>\n<li>불가능</li>\n<li>등급 변경에 따른 프로세스 영향도 측정</li>\n</ul>\n</li>\n<li>\n<p>aws parsing 후 =>  boto 등급 변경 || 추가 권한이 필요해진다.</p>\n<ul>\n<li><a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html?highlight=resource#S3.Client.copy_object\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html?highlight=resource#S3.Client.copy_object</a></li>\n</ul>\n</li>\n<li>\n<p>압축을 한번 더 해야 한다. -> daily 압축</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>수명 주기</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>EC2 credit -> </p>\n<ul>\n<li>watch 격리 되어 있음</li>\n<li>배치 계정별 별도 람다 => 공통 S3</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"22-12-22-목\" style=\"position:relative;\"><a href=\"#22-12-22-%EB%AA%A9\" aria-label=\"22 12 22 목 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-22 목</h3>\n<ul>\n<li>\n<p>WORKPLACE</p>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>\n<p>람다 디버깅 2 |  1</p>\n<ul>\n<li>\n<p>원인</p>\n<ul>\n<li>DB 커넥션 과다</li>\n</ul>\n</li>\n<li>데이터 유실됨</li>\n<li>\n<p>대응</p>\n<ul>\n<li>engine.connect() context 사용함</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>람다 동작 고치기 3 | 3</p>\n<ul>\n<li>키네시스 비활성</li>\n<li>\n<p>코드 변경</p>\n<ul>\n<li>테스트 DB 변경 배포</li>\n<li>connection pool 바꾸기</li>\n<li>\n<p>connection close…?</p>\n<ul>\n<li>\n<p>with engine.connect() as connection:</p>\n<ul>\n<li>result = connection.execute(“select username from users”)</li>\n<li>\n<p>for row in result:</p>\n<ul>\n<li>print(“username:”, row[‘username’])</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>동작 확인</li>\n<li>원 DB 복구 배포</li>\n<li>키네시스 활성화</li>\n</ul>\n</li>\n<li>\n<p>데이터 클리닝 4 | </p>\n<ul>\n<li>중복값 제거</li>\n<li>\n<p>튀는값 제거</p>\n<ul>\n<li>람다가 멈춰있다가 동작할때 들어간것들 인터스와 이벤트 사이에 텀이 길다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>통계 지표 산출 2 | 2</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>\n<p>s3 정책 찾아보기 3 |</p>\n<ul>\n<li>\n<p>등급 변환</p>\n<ul>\n<li>수명주기 관리로 자동 적용</li>\n<li>\n<p>수동으로 객체 지정해서 변경</p>\n<ul>\n<li>동일 obj key로 class 변경해서 지정하면 등급 변경 가능함</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>압축 해야 할 수도</p>\n<ul>\n<li>\n<p>왜?</p>\n<ul>\n<li>glacier 등급을 사용할 경우 Obj 마다 s3 standard 8kb, glacer 32kb 데이터가 추가로 붙어서 저장이 된다. </li>\n</ul>\n</li>\n<li>\n<p>주기별 파일 압축해서 metadata 낭비 막음</p>\n<ul>\n<li>hourly</li>\n<li>daily</li>\n<li>weekly</li>\n</ul>\n</li>\n<li>\n<p>어떻게?</p>\n<ul>\n<li>\n<p>람다</p>\n<ul>\n<li>로드</li>\n<li>압축  </li>\n<li>upload</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<p>​\t</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"22-12-23-금\" style=\"position:relative;\"><a href=\"#22-12-23-%EA%B8%88\" aria-label=\"22 12 23 금 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-23 금</h3>\n<ul>\n<li>\n<p>WORKPLACE</p>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>\n<p>EC2 credit 수집 방법 정리하기 구현 6 | </p>\n<ul>\n<li>watch event -> lambda -> rds</li>\n<li>s3 생성</li>\n<li>\n<p>lambda 생성</p>\n<ul>\n<li>\n<p>get ec2 instance list </p>\n<ul>\n<li>\n<p>권한 걸림</p>\n<ul>\n<li>instance id 조회 필요함</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>watch metric loads</p>\n<ul>\n<li><del>와치 조회 권한 필요</del></li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>s3 put object</p>\n<ul>\n<li>권한 </li>\n</ul>\n</li>\n<li>lambda</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>\n<p>미팅</p>\n<ul>\n<li>\n<p>SQL</p>\n<ul>\n<li>지난번 데이터 에러</li>\n<li>쿼리</li>\n</ul>\n</li>\n<li>\n<p>s3</p>\n<ul>\n<li>전달</li>\n<li>공유</li>\n</ul>\n</li>\n<li>\n<p>EC2 credit 수집 방법</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"tel-trial-and-error-log\" style=\"position:relative;\"><a href=\"#tel-trial-and-error-log\" aria-label=\"tel trial and error log permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TEL (Trial and Error Log)</h2>\n<h3 id=\"22-12-22\" style=\"position:relative;\"><a href=\"#22-12-22\" aria-label=\"22 12 22 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-22</h3>\n<ul>\n<li>\n<p>ERROR: OperationalError: (psycopg2.OperationalError) connection to server at ”<IP>”, port <PORT> failed: Connection refused</p>\n<ul>\n<li>Is the server running on that host and accepting TCP/IP connections?</li>\n<li>\n<p>SITUATION:</p>\n<ul>\n<li>psycopg2 on Lambda</li>\n</ul>\n</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li>connection 몰림</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>\n<p>람다 데이터베이스 프록시 사용 &#x3C;= 람다 개별 커넥션</p>\n<ul>\n<li>이건 aws RDS 만 제공함</li>\n<li>함수 스프 밖에 있는것 재활용 할 수 있음</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/posts/TIL&TEL_22-12-25/","tagSlugs":["/tag/til/","/tag/tel/"]},"frontmatter":{"date":"2022-12-25T01:23:45.678Z","description":" 22.12.19~22.12.25 배운것, 씨름한것들 ","tags":["TIL","TEL"],"title":" TIL&TEL 22.12.19~22.12.25  "}}},"pageContext":{"slug":"/posts/TIL&TEL_22-12-25/"}},"staticQueryHashes":["251939775","3613830147","401334301"]}