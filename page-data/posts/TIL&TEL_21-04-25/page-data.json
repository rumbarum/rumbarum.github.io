{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/TIL&TEL_21-04-25/","result":{"data":{"markdownRemark":{"id":"cc38bd56-3b2b-5dbb-ad2e-c506f0cc5fd8","html":"<h2 id=\"til-today-i-learned\" style=\"position:relative;\"><a href=\"#til-today-i-learned\" aria-label=\"til today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TIL( Today I Learned)</h2>\n<h3 id=\"21-04-19-월\" style=\"position:relative;\"><a href=\"#21-04-19-%EC%9B%94\" aria-label=\"21 04 19 월 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-19 월</h3>\n<ul>\n<li>\n<p>08:30 아침 스터디</p>\n<ul>\n<li>git 다시 알기</li>\n</ul>\n</li>\n<li>pip 정리하기</li>\n<li>\n<p>Docker 정리하기</p>\n<ul>\n<li>\n<p>image 생성, dev / prod</p>\n<ul>\n<li>dev : Dockerfile 만들고 volume share</li>\n<li>prod : Dockerfile + 실행 코드 code들 ADD</li>\n</ul>\n</li>\n<li>\n<p>docker compose dev / prod 구분 어떻게?</p>\n<ul>\n<li>\n<p>dev : docker 파일로 동작하면 된다. </p>\n<ul>\n<li>이미지 build 해서 동작</li>\n</ul>\n</li>\n<li>\n<p>prod : image 댕겨와서 동작해야한다.</p>\n<ul>\n<li>containger reristry 에 올려진 이미지로 동작</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>배포는 어떻게?</p>\n<ul>\n<li>\n<p>Jenkins </p>\n<ul>\n<li>git repository pull</li>\n<li>Builld Docker image</li>\n<li>Push image to Google Container Resistry</li>\n<li>Push Docker-Compose file to Google Container Storage</li>\n<li>Pull Docker-compose file </li>\n<li>run gcloud command</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"21-04-20-화\" style=\"position:relative;\"><a href=\"#21-04-20-%ED%99%94\" aria-label=\"21 04 20 화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-20 화</h3>\n<ul>\n<li>연차</li>\n</ul>\n<h3 id=\"21-04-21-수\" style=\"position:relative;\"><a href=\"#21-04-21-%EC%88%98\" aria-label=\"21 04 21 수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-21 수</h3>\n<ul>\n<li>\n<p>Django Dockerizimg</p>\n<ul>\n<li>\n<p>테스트 하면서 놓친 lib 파악하기 </p>\n<ul>\n<li>google storage 관련 python package는 깔려있지 않아도 동작이 가능하다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>local, deploy process 만들기</li>\n</ul>\n<h3 id=\"21-04-22-목\" style=\"position:relative;\"><a href=\"#21-04-22-%EB%AA%A9\" aria-label=\"21 04 22 목 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-22 목</h3>\n<ul>\n<li>개발 기초 스터디</li>\n<li>\n<p>Git</p>\n<ul>\n<li>\n<p>add commit push</p>\n<ul>\n<li>file path </li>\n</ul>\n</li>\n<li>\n<p>git pull —rebase origin develop</p>\n<ul>\n<li>merge</li>\n<li>—no-ff</li>\n<li>—squash</li>\n<li>\n<p>—rebase</p>\n<ul>\n<li>conflict 가능성을 낮춘다. </li>\n<li>단점 : commit history 구분이 섞인다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>git stash -p</p>\n<ul>\n<li>hunk 단위 stash 가능하다.</li>\n</ul>\n</li>\n<li>\n<p>commit</p>\n<ul>\n<li>\n<p>브랜치는 리모트에서(e.g. github, gitlab, etc) 따는게 좋다. (로컬말고)</p>\n<ul>\n<li>git checkout develop </li>\n<li>git fetch origin develop</li>\n<li>git checkout -b feature-story101234</li>\n</ul>\n</li>\n<li>주제에 맞는 커밋만</li>\n<li>\n<p>step 1</p>\n<ul>\n<li>file 단위로 커밋</li>\n</ul>\n</li>\n<li>\n<p>step 2</p>\n<ul>\n<li>\n<p>헝크 단위로 커밋</p>\n<ul>\n<li>patch option (git add -p)</li>\n<li>interactive mode (s, a, …)</li>\n<li>\n<p>git commit —amend</p>\n<ul>\n<li>직전 commit에 합치기</li>\n</ul>\n</li>\n<li>git commit -m “title”</li>\n<li>git log -p [file path]</li>\n</ul>\n</li>\n<li>\n<p>헝크 단위로 stash</p>\n<ul>\n<li>git stash save “title” -p </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>step 3</p>\n<ul>\n<li>줄단위 커밋 </li>\n<li>hunk 에디팅</li>\n<li>\n<p>git commit -am “t”</p>\n<ul>\n<li>a : all </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>django</p>\n<ul>\n<li>\n<p>logs 처리</p>\n<ul>\n<li>\n<p>docker cli</p>\n<ul>\n<li>-v /Users/<path>:/<container path></li>\n</ul>\n</li>\n<li>\n<p>compose</p>\n<ul>\n<li>\n<p>volume:</p>\n<ul>\n<li>- ~/logs/bo-api/:/app/GS_API/logs/bo-api/</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>docker build 해보기</li>\n</ul>\n</li>\n<li>\n<p>Jenkins 배포</p>\n<ul>\n<li>\n<p>Docker 빌드, 배포 프로세스 구성</p>\n<ul>\n<li>docker </li>\n</ul>\n</li>\n<li>\n<p>찾아보기</p>\n<ul>\n<li><a href=\"https://medium.com/google-cloud/how-to-push-docker-image-to-google-container-registry-gcr-through-jenkins-job-52b9d5ce9f7f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">jenkins 활용</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-debian-9\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Debian docker 설치</a></li>\n</ul>\n</li>\n<li>Jenkins docker 설치</li>\n<li>gce auth fail </li>\n</ul>\n</li>\n<li>\n<p>Nginx </p>\n<ul>\n<li>settings</li>\n<li>Dockerfile 필요하다</li>\n<li>front 달기 생략. 별도구성</li>\n<li>SSL 인증서 달기</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"21-04-23-금\" style=\"position:relative;\"><a href=\"#21-04-23-%EA%B8%88\" aria-label=\"21 04 23 금 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-23 금</h3>\n<ul>\n<li>\n<p>docker</p>\n<ul>\n<li>\n<p>jenkins -> gcr</p>\n<ul>\n<li>\n<p>registry auth</p>\n<ul>\n<li>\n<p>auth 방식 변경?</p>\n<ul>\n<li><a href=\"https://cloud.google.com/container-registry/docs/access-control?hl=ko#grant\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://cloud.google.com/container-registry/docs/access-control?hl=ko#grant</a> </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>compose.yml -> gcs </p>\n<ul>\n<li>gsutil cp <filepath>  gs://storage/address/somewhere/</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"tel-trial-and-error-log\" style=\"position:relative;\"><a href=\"#tel-trial-and-error-log\" aria-label=\"tel trial and error log permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TEL (Trial and Error Log)</h2>\n<h3 id=\"21-04-21\" style=\"position:relative;\"><a href=\"#21-04-21\" aria-label=\"21 04 21 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-21</h3>\n<ul>\n<li>\n<p>ERROR: django.db.utils.OperationalError: (1054, “Unknown column ‘product. modify_by’ in ‘field list’“)</p>\n<ul>\n<li>SITUATION: django 동작 에러</li>\n<li>REASON: modle db_column에 space 들어감</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>space 제거한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ERROR: nginx 502 bad gateway</p>\n<ul>\n<li>SITUATION: nlp 외부 요청 팅겨냄, 직접 하면 되는데, 우회해서 하면 안된다.</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li>내부에서 internal error 발생중, elastic index 날라갔음</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>elastic index 다시 만듬</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ERROR: docker OSError: mysql_config not found</p>\n<ul>\n<li>SITUATION: Docker building</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li><code class=\"language-text\">default-libmysqlclient-dev</code> 가 없어서</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>`<code class=\"language-text\"></code>RUN apt-get install python3-dev default-libmysqlclient-dev -y`<code class=\"language-text\"></code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"21-04-22\" style=\"position:relative;\"><a href=\"#21-04-22\" aria-label=\"21 04 22 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-22</h3>\n<ul>\n<li>\n<p>ERROR:  for gs<em>api</em>dmc-django_1 Cannot start service dmc-django: Mounts denied:</p>\n<ul>\n<li>SITUATION: django host filesystem mounting</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li>file path 잘못 넣고 있었음’</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>file path 수정</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ERROR: docker .sh 파일 실행시 동작 안함</p>\n<ul>\n<li>SITUATION: django gunicorn 실행 파일 .sh 로 실행중</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li>docker command 에서 &#x26; back ground 작업이 안먹음</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>&#x26; backgroud 작업 삭제</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"21-04-23\" style=\"position:relative;\"><a href=\"#21-04-23\" aria-label=\"21 04 23 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>21-04-23</h3>\n<ul>\n<li>\n<p>ERROR: /var/run/docker.sock: connect: permission denied</p>\n<ul>\n<li>SITUATION: docker 실행중</li>\n<li>REASON: 권한문제</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li><code class=\"language-text\">/var/run/docker.sock</code>파일의 권한을 666으로 변경하여 그룹 내 다른 사용자도 접근 가능하게 변경 </li>\n<li><code class=\"language-text\">sudo chmod 666 /var/run/docker.sock</code></li>\n<li>또는 chown 으로 group ownership 변경</li>\n<li><code class=\"language-text\">sudo chown root:docker /var/run/docker.sock</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ERROR: Jenkins and docker: uri was not specified</p>\n<ul>\n<li>SITUATION: jenkins docker plugin으로 빌드중</li>\n<li>REASON:실행 연결 지점 못찾음</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>In Manage <code class=\"language-text\">Jenkins/Configure System/Docker</code> </li>\n<li>Builder You will see that the Docker URL option is left blank. Fill it with the unix socket url <code class=\"language-text\">unix:///var/run/docker.sock</code>. That should solve the issue.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ERROR: gcloud login shell 에서 되는데, jenkins에서 안됨</p>\n<ul>\n<li>SITUATION: gcloud auth 했는데 동작을 못하고 있음</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li>플러그인 동작 에러…</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>\n<p>Excute Shell command 로 진행</p>\n<ul>\n<li>임시방편 해결책이다. </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/posts/TIL&TEL_21-04-25/","tagSlugs":["/tag/til/","/tag/tel/"]},"frontmatter":{"date":"2021-04-25T01:23:45.678Z","description":" 21.04.19~21.04.25 배운것, 씨름한것들 ","tags":["TIL","TEL"],"title":" TIL&TEL 21.04.19~21.04.25  "}}},"pageContext":{"slug":"/posts/TIL&TEL_21-04-25/"}},"staticQueryHashes":["251939775","3613830147","401334301"]}