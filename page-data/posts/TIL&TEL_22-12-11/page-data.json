{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/TIL&TEL_22-12-11/","result":{"data":{"markdownRemark":{"id":"d6dd712d-a9c1-5e54-a3a2-157f6e3e2ffd","html":"<h2 id=\"til-today-i-learned\" style=\"position:relative;\"><a href=\"#til-today-i-learned\" aria-label=\"til today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TIL( Today I Learned)</h2>\n<h3 id=\"22-12-05-월\" style=\"position:relative;\"><a href=\"#22-12-05-%EC%9B%94\" aria-label=\"22 12 05 월 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-05 월</h3>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>\n<p>비용 계산</p>\n<ul>\n<li>\n<p>트래픽 공통</p>\n<ul>\n<li>100GB out 공짜</li>\n<li>\n<p>그 이후</p>\n<ul>\n<li>$ 0.126 / GB</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>rds 단순</p>\n<ul>\n<li>\n<p>컴퓨팅</p>\n<ul>\n<li>\n<p>acu</p>\n<ul>\n<li>1ACU는 2GiB의 메모리와 해당하는 컴퓨팅 및 네트워킹을 제공</li>\n<li>USD 0.2 per Aurora Capacity Unit hour running Aurora PostgreSQL Serverless v2</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>저장소</p>\n<ul>\n<li>USD 0.120 per GB-month of consumed storage for Aurora PostgreSQL</li>\n<li></li>\n<li>\n<p>I/OPS</p>\n<ul>\n<li>USD 0.24 per 1 million I/O requests for Aurora PostgreSQL</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>트래픽</li>\n</ul>\n</li>\n<li>\n<p>rds aurora</p>\n<ul>\n<li>\n<p>컴퓨팅</p>\n<ul>\n<li>\n<p>acu</p>\n<ul>\n<li>1ACU는 2GiB의 메모리와 해당하는 컴퓨팅 및 네트워킹을 제공</li>\n<li>USD 0.2 per Aurora Capacity Unit hour running Aurora PostgreSQL Serverless v2</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>저장소</p>\n<ul>\n<li>USD 0.120 per GB-month of consumed storage for Aurora PostgreSQL</li>\n<li></li>\n<li>\n<p>I/OPS</p>\n<ul>\n<li>USD 0.24 per 1 million I/O requests for Aurora PostgreSQL</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>트래픽</li>\n</ul>\n</li>\n<li>\n<p>ec2 - ebs</p>\n<ul>\n<li>\n<p>컴퓨팅</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>저장소</p>\n<ul>\n<li>0.114 per GB-month of General Purpose SSD (gp2) provisioned storage - Asia Pacific (Seoul)</li>\n</ul>\n</li>\n<li>트래픽</li>\n</ul>\n</li>\n<li>\n<p>drex 내부 저장</p>\n<ul>\n<li></li>\n<li>\n<p>컴퓨팅</p>\n<ul>\n<li>\n<p>acu</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>저장소</p>\n<ul>\n<li>$0.125/GB-month </li>\n<li>I/OPS</li>\n</ul>\n</li>\n<li>트래픽</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>람다 </p>\n<ul>\n<li>\n<p>limit 설정이 가능한가?</p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/invocation-scaling.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">동시성 및 크기 조정 제어</a></li>\n<li>\n<p>또는 알림?</p>\n<ul>\n<li>\n<p>concurrency</p>\n<ul>\n<li>동시 처리 진행량 늘리기 기본 500</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>database Proxy </p>\n<ul>\n<li>양이 늘어난다면 이것 처리도 필요하다 db connection managing</li>\n</ul>\n</li>\n<li>\n<p>의존성을 도커로 말아서 제공 - 의존성 관리 편해짐, 코드 관리 불편해짐</p>\n<ul>\n<li>aws ecr 사용 필요</li>\n</ul>\n</li>\n<li>\n<p>비동기 호출</p>\n<ul>\n<li>함수 실행 결과에 상관없이 전달 여부만 전달</li>\n<li>실패시 이벤트 대기열 대시 후 진행</li>\n</ul>\n</li>\n<li>\n<p>동기 호출</p>\n<ul>\n<li>실패시 실패에러 전달 X</li>\n<li>cloudwatch logs에 에러로그 출력</li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n<li>\n<p>yaml 선택적 적용 -> 가능</p>\n<ul>\n<li>Condition 변수</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>lambda 변수 은닉화</p>\n<ul>\n<li>\n<p>ENV VAR</p>\n<ul>\n<li>코드 변경없이 변수 변경을 위해 제공중</li>\n<li>Docker 이미지 사용?</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>후가공 프로세스</p>\n<ul>\n<li>flow  chart</li>\n<li>서빙용으로 데이터 가공</li>\n<li>\n<p>가공 schema</p>\n<ul>\n<li>분석모듈</li>\n<li>필터</li>\n<li>user_stat</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>~~~~</li>\n</ul>\n</li>\n<li>PHASE 3 16-18 / 4</li>\n<li></li>\n</ul>\n<h3 id=\"22-12-06-화\" style=\"position:relative;\"><a href=\"#22-12-06-%ED%99%94\" aria-label=\"22 12 06 화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-06 화</h3>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>수집</li>\n<li>분석</li>\n<li>감시</li>\n<li></li>\n<li>\n<p>람다 왜 에러 났음…?? </p>\n<ul>\n<li>\n<p>vpc flow log</p>\n<ul>\n<li>\n<p>[ERROR] DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input synta 시작</p>\n<ul>\n<li>에러 쌓이기 시작하다가, 누적되면서 파싱하는데 시간소모되서 해결 못함</li>\n</ul>\n</li>\n<li>Task timed out after 10.08 seconds</li>\n</ul>\n</li>\n<li>\n<p>streamToRDB</p>\n<ul>\n<li>\n<p>Task timed out </p>\n<ul>\n<li>\n<p>이벤트 7개 처리에</p>\n<ul>\n<li>10초 넘기기 시작</li>\n<li>왜…?</li>\n</ul>\n</li>\n<li>DB 커넥션 풀 맥스로 락걸려서 오래 걸리나??</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>DNS log</p>\n<ul>\n<li>\n<p>얘는 정상 작동함</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>ERROR] DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input synta </li>\n</ul>\n</li>\n<li>\n<p>watch metric </p>\n<ul>\n<li>ERROR] DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input synta </li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>람다 실패 플랜 만들기</p>\n<ul>\n<li>\n<p>실패 데이터 별도 저장</p>\n<ul>\n<li>SQS, SNS</li>\n</ul>\n</li>\n<li>Watch 에 람다 실패 경고..</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>start, end 파싱 다시 하기 </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li></li>\n<li>\n<p>스키마 변경</p>\n<ul>\n<li>tz 값 떼기</li>\n</ul>\n</li>\n<li></li>\n<li>\n<p>옮기기</p>\n<ul>\n<li>\n<p>새 테이블 만들기</p>\n<ul>\n<li>seq  시작  with room </li>\n</ul>\n</li>\n<li>\n<p>lambda 저장 위치 변경</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>pg dump, pg_restore</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>~~~~</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"22-12-07-수\" style=\"position:relative;\"><a href=\"#22-12-07-%EC%88%98\" aria-label=\"22 12 07 수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-07 수</h3>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>람다 개선</li>\n<li></li>\n<li>\n<p>람다 실패 플랜 </p>\n<ul>\n<li>\n<p>실패 데이터 별도 저장</p>\n<ul>\n<li>SQS, SNS</li>\n</ul>\n</li>\n<li>Watch 에 람다 실패 경고..</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>timestamp 값 변경</p>\n<ul>\n<li>\n<p>기존</p>\n<ul>\n<li>boto3 response time</li>\n</ul>\n</li>\n<li>\n<p>이후</p>\n<ul>\n<li>kinesis Insert Time</li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>람다 에러</p>\n<ul>\n<li>\n<p>streamToRDB</p>\n<ul>\n<li>\n<p>Task timed out </p>\n<ul>\n<li>\n<p>이벤트 7개 처리에</p>\n<ul>\n<li>10초 넘기기 시작</li>\n<li>왜…?</li>\n</ul>\n</li>\n<li>DB 커넥션 풀 맥스로 락걸려서 오래 걸리나??</li>\n</ul>\n</li>\n<li>실패시 쪼개서 작업 들어감</li>\n</ul>\n</li>\n<li>\n<p>watch metric </p>\n<ul>\n<li>\n<p>[ERROR] DataError: (psycopg2.errors.NumericValueOutOfRange) integer out of range</p>\n<ul>\n<li>Integer to Float </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>vpc flow log</p>\n<ul>\n<li>\n<p>DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type bigint: ”-”</p>\n<ul>\n<li>bytes</li>\n<li>\n<p>빈값 ’-‘처리 필요함</p>\n<ul>\n<li>df 처리 </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Task timed out after 10.08 seconds</p>\n<ul>\n<li>에러 쌓이기 시작하다가, 누적되면서 파싱하는데 시간소모되서 해결 못함</li>\n<li>\n<p>램 증설 또는 레코드 사이즈 조절</p>\n<ul>\n<li>50 -> 10</li>\n<li>192 -> 320</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>start, end  수정하기</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>DNS log</p>\n<ul>\n<li>얘는 정상 작동함</li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n<li>\n<p>스키마 변경</p>\n<ul>\n<li>\n<p>tz 값 떼기</p>\n<ul>\n<li><del>vpc</del></li>\n<li><del>dns</del></li>\n<li><del>watch</del></li>\n<li><del>trail</del></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>timestamp  설명</p>\n<ul>\n<li>\n<p>kinesis timestamp </p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>cloudwatch event timestamp</p>\n<ul>\n<li>vpc_flowlog</li>\n<li>dns_log</li>\n<li>cloudtrail </li>\n</ul>\n</li>\n<li>\n<p>self timestamp</p>\n<ul>\n<li>cloudwatch metric</li>\n</ul>\n</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>옮기기</p>\n<ul>\n<li>\n<p>새 테이블 만들기</p>\n<ul>\n<li>\n<p>seq  시작  with Space</p>\n<ul>\n<li>vpc</li>\n<li>dns</li>\n<li>watch</li>\n<li>trail</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>lambda 저장 위치 변경</p>\n<ul>\n<li>schema log_data2</li>\n<li><del>vpc</del></li>\n<li><del>dns</del></li>\n<li><del>watch</del></li>\n<li><del>trail</del></li>\n</ul>\n</li>\n<li>\n<p>Last Event Time</p>\n<ul>\n<li>pg dump, pg_restore</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>~~~~</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"22-12-08-목\" style=\"position:relative;\"><a href=\"#22-12-08-%EB%AA%A9\" aria-label=\"22 12 08 목 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-08 목</h3>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>\n<p>람다 에러 확인 3 | 3</p>\n<ul>\n<li>\n<p>vpc </p>\n<ul>\n<li>\n<p>lambda 에러 4건 발생함</p>\n<ul>\n<li>DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type bigint: ”-”</li>\n<li>LINE 1: …’::timestamp), (‘779205805467’, ’-’, ‘apne2-az3’, ’-’, ’-’, …</li>\n</ul>\n</li>\n<li>srcport”, “dstport”, “protocol”, “packets”, “bytes</li>\n<li>Fix dataframe data manu</li>\n</ul>\n</li>\n<li>\n<p>watch metric 에러 확인하기</p>\n<ul>\n<li>32.16166666666667</li>\n<li>6929178624.0 => 여기서 에러가 발생함</li>\n<li>0.67796610168505</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>할일정리</p>\n<ul>\n<li>\n<p>데이터 변경</p>\n<ul>\n<li>\n<p>칼럼네임 변경</p>\n<ul>\n<li>timestamp -> timestamp_tz, </li>\n<li>event<em>time -> event</em>time_utc</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>수집방법들 검증</p>\n<ul>\n<li>\n<p>vpc, dns -> s3 수집 추가</p>\n<ul>\n<li>\n<p>VPC</p>\n<ul>\n<li>Cloudwatch</li>\n<li>S3</li>\n<li>KinesisFirehose</li>\n</ul>\n</li>\n<li>\n<p>DNS</p>\n<ul>\n<li>Cloudwatch</li>\n<li>S3</li>\n<li>KinesisFirehose</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>테스트 </p>\n<ul>\n<li>\n<p>가설</p>\n<ul>\n<li>람다에는 키네시스에서 어떻게 컨슘 하는지가 나와 있지 않다.</li>\n<li>단지 연결만 시킬 뿐이다. </li>\n<li>람다 코드가 업데이트 될 경우, 키네시스 어디서 가져올지 어떻게 알것인가?</li>\n<li>키네시스와 람다 사이에 키네시스에서 컨슘하고 람다로 집어넣는 작업을 해주는 매니저가 있을 것을 추정된다.</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>키네시스 수집 정지했다가 재가동할시 데이터 이어서 수집이 되는지?</p>\n<ul>\n<li>동일한 람다 함수를 만들어 놓고 중간에 kinesis  disable -> enable 시켜봄</li>\n<li>\n<p>중간에 3분정도 disable 시켰다가 다시 enable 시켜도 </p>\n<ul>\n<li>disable 시간 포함 같은 갯수의 데이터 보유하고 있음</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>결론</p>\n<ul>\n<li>\n<p>람다 업데이트시, </p>\n<ul>\n<li>Kinesis 트리거 Disable</li>\n<li>Lambda Update</li>\n<li>Kinesis Enable</li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>트레일, 기존 수집과 새 수집 데이터 정합성 비교 해보기</p>\n<ul>\n<li>쉬지 않고 수집한 내역</li>\n<li>count event_id</li>\n</ul>\n</li>\n<li></li>\n<li>\n<p>Credit 수집 방법 대안들 탐색</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>데이터 관리 정책 생각해보기</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>람다 에러대응 테스트 해보기</p>\n<ul>\n<li>재시도 횟수</li>\n<li>배치 사이즈 비교</li>\n</ul>\n</li>\n<li>\n<p>VPC, DNS 데이터 분석</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>~~~~</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"22-12-09-금\" style=\"position:relative;\"><a href=\"#22-12-09-%EA%B8%88\" aria-label=\"22 12 09 금 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-09 금</h3>\n<ul>\n<li>\n<p>PHASE 1 9-12 / 6</p>\n<ul>\n<li>\n<p>Lambda 에러</p>\n<ul>\n<li>[ERROR] DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: ”-”</li>\n<li>LINE 1: …2’, ’-’, 0, ’-’, ’-’, ‘subnet-0ca8c34aa6ff75926’, ’-’, ’-’, …</li>\n</ul>\n</li>\n<li>\n<p>키네시스-람다 연결성테스트 </p>\n<ul>\n<li>\n<p>가설</p>\n<ul>\n<li>람다에는 키네시스에서 어떻게 컨슘 하는지가 나와 있지 않다.</li>\n<li>단지 연결만 시킬 뿐이다. </li>\n<li>람다 코드가 업데이트 될 경우, 키네시스 어디서 가져올지 어떻게 알것인가?</li>\n<li>키네시스와 람다 사이에 키네시스에서 컨슘하고 람다로 집어넣는 작업을 해주는 매니저가 있을 것을 추정된다.</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>키네시스 수집 정지했다가 재가동할시 데이터 이어서 수집이 되는지?</p>\n<ul>\n<li>동일한 람다 함수를 만들어 놓고 중간에 kinesis  disable -> enable 시켜봄</li>\n<li>\n<p>중간에 3분정도 disable 시켰다가 다시 enable 시켜도 </p>\n<ul>\n<li>disable 시간 포함 같은 갯수의 데이터 보유하고 있음</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>결론</p>\n<ul>\n<li>\n<p>람다 업데이트시, </p>\n<ul>\n<li>Kinesis 트리거 Disable</li>\n<li>Lambda Update</li>\n<li>Kinesis Enable</li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>데이터 변경</p>\n<ul>\n<li>\n<p>칼럼네임 변경</p>\n<ul>\n<li>timestamp -> timestamp_tz, </li>\n<li>event<em>time -> event</em>time_utc<code class=\"language-text\"></code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>람다 에러대응 테스트 해보기</p>\n<ul>\n<li>문서 찾아보기</li>\n<li>배치 사이즈 비교</li>\n<li>재시도 횟수</li>\n</ul>\n</li>\n<li></li>\n<li>\n<p>cloudwatch metric 중복 확인</p>\n<ul>\n<li>\n<p>동일 데이터 한번에 9개가 저장 되는 이유는 뭘까?</p>\n<ul>\n<li>watch metric 에서 계속 쏘고 있음 => 아님</li>\n</ul>\n</li>\n<li></li>\n</ul>\n</li>\n<li>\n<p>VPC, DNS 데이터 분석</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>Credit 수집 방법 대안들 탐색</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>PHASE 2 13-16 / 6</p>\n<ul>\n<li>~~~~</li>\n</ul>\n</li>\n<li>\n<p>PHASE 3 16-18 / 4</p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"tel-trial-and-error-log\" style=\"position:relative;\"><a href=\"#tel-trial-and-error-log\" aria-label=\"tel trial and error log permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TEL (Trial and Error Log)</h2>\n<h3 id=\"22-12-07\" style=\"position:relative;\"><a href=\"#22-12-07\" aria-label=\"22 12 07 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-07</h3>\n<ul>\n<li>\n<p>ERROR: lambda timed out</p>\n<ul>\n<li>SITUATION: AWS lambda running</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li>Data hadling time exceed the limit: 10s </li>\n<li>because cpu is limited by allocated ram size</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>\n<p>set options for failure</p>\n<ul>\n<li>retire count</li>\n<li>split data when fail</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ERROR: Passing list-likes to .loc or [] with any missing labels is no longer supported. The following labels were missing: Index([‘start<em>utc, end</em>utc’], dtype=‘object’).</p>\n<ul>\n<li>\n<p>SITUATION:</p>\n<ul>\n<li>df multi column tz.localize </li>\n</ul>\n</li>\n<li>\n<p>REASON:</p>\n<ul>\n<li>spelling Error</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>“start<em>utc”, “end</em>utc” &#x3C;== “start<em>utc, end</em>utc” </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"22-12-08\" style=\"position:relative;\"><a href=\"#22-12-08\" aria-label=\"22 12 08 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22-12-08</h3>\n<ul>\n<li>\n<p>ERROR: DataError: (psycopg2.errors.NumericValueOutOfRange) integer out of range</p>\n<ul>\n<li>\n<p>SITUATION: cloudwatch metric -> RDB lambda</p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>REASON: column type 데이터 안맞음</p>\n<ul>\n<li>6929178624.0</li>\n<li>에서 에러남</li>\n</ul>\n</li>\n<li>\n<p>SOLUTION:</p>\n<ul>\n<li>\n<p>colum Type</p>\n<ul>\n<li>FLOAT &#x3C;== Int4</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/posts/TIL&TEL_22-12-11/","tagSlugs":["/tag/til/","/tag/tel/"]},"frontmatter":{"date":"2022-12-11T01:23:45.678Z","description":" 22.12.05~22.12.11 배운것, 씨름한것들 ","tags":["TIL","TEL"],"title":" TIL&TEL 22.12.05~22.12.11  "}}},"pageContext":{"slug":"/posts/TIL&TEL_22-12-11/"}},"staticQueryHashes":["251939775","3613830147","401334301"]}